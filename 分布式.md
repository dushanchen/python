### 负载均衡

#### 接入层
    lvs、 GatewayEP，将请求均匀分配到各个后端节点

#### 分布式存储
    DHT 分布式哈希表，将对象均匀分散存储到多个节点

    冗余机制
    1. 多副本模式
    2. 纠删码模式 EC 

#### 动态负载均衡
    OBS集群实时监控节点负载（CPU、内存、磁盘I/O），通过智能调度算法将请求路由至低负载节点。

### 高可用与容灾
    在全球多个数据中心部署节点，支持跨区域数据同步与复制，实现低延迟访问和异地容灾。用户可选择就近区域存储数据，提升访问速度。

### 高可靠

### 一致性
    最终一致性和强一致性

### 资源配置

#### 水平扩容
    支持集群节点动态增减，无需中断服务。

#### 冷热分层
    热点数据存储在ssd之类的高性能存储介质，冷数据使用HDD存储或者归档存储，依次降低存储成本

### 安全

#### 限流
    布隆过滤器 过滤不存在对象的请求
    滑动窗口限制上传下载请求的带宽、tps等

    服务降级

#### 加密
    OBS提供传输层加密（SSL/TLS）和存储层加密（SSE-KMS）双重保障

#### 权限控制
    OBS支持基于IAM（身份与访问管理）的权限控制，用户可定义存储桶、对象级别的读写权限。

### 中间件

#### zookeeper
    动态下发，适合存储配置、元数据。
    强一致性，保证所有客户端看到的数据视图是相同的。
    写慢读快。写需要集群多数派确认。
    
    作为 “配置中心” 和 “协调者”。

    1. 集中式密钥管理，持久节点存储服务密钥，更新时，服务节点根据watcher机制监听并实时更新
    2. 动态权限策略，持久节点
    3. 分布式限流配置，持久节点
    4. 分布式锁， 临时节点 + watch机制 （可靠性高，防死锁、公平锁、性能略低于redis）

#### redis
    丰富的键值结构（String, Hash, Set等），适合存储业务数据。
    最终一致性（主从模式）或 强一致性（Redis Sentinel/Cluster模式配置复杂）。

    作为 “缓存” 和 “数据库”。

    1. 动态会话数据的存储。（User Session、API Token、限流计数器）

#### etcd

### 对象存储
DNS解析，LS 定位服务解析桶所在位置
LVS负载均衡
限流，用户TPS、BPS限流（分get、post请求），服务降级 503
AKSK鉴权、本地缓存iam token，若果最近无访问，则定时刷新token有效期。iam故障，本地缓存延长自动有效期至1天。
实时日志定期归档备份，业务请求日志、外部接口日志、本地CPU、磁盘日志等
查询对象时，禁止深分页，只能逐页下翻
分布式组件，master选举、仲裁
DHT分布式哈希环， 让对象均匀分散存储到不同的存储池
温冷、归档存储， HDD、SSD，NVMe加速读写
EC冗余机制，三副本冗余
mongo 分片，存储元数据，chunk分裂，热点问题
把存储空间划分为单位块（plog），比如每块1GB； 追加写存储方式
GC 搬迁、删除，利用率阈值 
生命周期配置，自动定期删除指定文件
覆盖写问题，导致GC搬迁进度跟不上，容易爆池
跨region复制
融合桶
2AZ容灾、3AZ
水平扩容，以存储池为逻辑单位扩容，
小型化融合部署，各个layer的组件部署在同一台节点
分离部署，不同layer的组件部署在不同节点
zookeeper 做分布式协调、配置动态更新
监控告警，依靠云平台带外监控，自定义监控脚本和告警规则，并前往平台注册，平台纳管服务并下发监控任务，定时执行监控脚本，搜集到数据返回平台，平台根据规 
    则决定是否告警
